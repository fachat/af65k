<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="author" content="" />

<meta name="description" content="65002 documentation" />
<meta name="keywords" content="8-bit,6502,65002" />
<link rev="made" href="mailto:" />
<link rel="stylesheet" title="Default" type="text/css" href="doc.css" /><link rel="stylesheet" type="text/css" href="optable.css" />
<title>65002 Opcode Structure</title></head>
<body><div id="headerbox"><div id="lefthdr">The 65k Project</div><div id="righthdr"><div class="large">65002</div><div class="small">The 65k processor - a modern 6502 with 64 bit</div></div></div><div id="mainbox"><a name="top" id="top"></a><div id="leftcol"><div id="menu" class="top"><div class="tophead">navigate</div>
<div id="mtree">
<ul>
<li><a href="af65002front.html">Overview</a></li>
<li><a href="af65002regs.html">Register Set</a></li>
<li><a href="af65002opstruct.html">Opcodes Structure </a></li>
<li><a href="af65002admodes.html">Addressing Modes </a></li>
<li><a href="af65002prefixes.html">Prefixes</a></li>
<li><a href="af65002opcodes.html">Opcode Overview</a></li>
<li><a href="af65002opdesc.html">Opcode Docs</a></li>
<li><a href="af65002int.html">Reset, Traps and Interrupts</a></li>
<li><a href="af65002hyper.html">User/Hypervisor Mode</a></li>
<li><a href="af65002config.html">Configuration Registers</a></li>
<li><a href="af65002compat.html">Compatibility</a></li>
</ul>
</div>
		</div></div><div id="rightcol"><div class="top" id="twitter"><div class="tophead">follow</div><div>
		            Follow the 65k tweets on<br /><a class="extlink" target="_blank" href="https://twitter.com/#!/search/realtime/afachat%20%2365k">Twitter</a><br /> (In new window)
		</div></div><div class="top" id="forum"><div class="tophead">discuss</div><div><p>Discuss my site on <a class="extlink" target="_blank" href="http://forum.6502.org/viewtopic.php?t=956">this 6502.org forum thread</a></p><p>(Forum registration required to post)</p></div></div></div><div id="midcol"><div class="top" id="ie6warn">
You are using an old MS Internet Explorer as browser. This version is not supported anymore. Please use a 
more modern browser, like Internet Explorer 8 or later, 
<a target="_blank" class="extlink" href="http://www.firefox.com">Firefox</a>,
<a target="_blank" class="extlink" href="http://www.google.com/chrome">Google Chrome</a>, or
<a target="_blank" class="extlink" href="http://www.opera.com">Opera</a>.
</div><div class="top" id="content"><div id="minmax"></div><h1>65002 Opcode Structure</h1><div class="overview">
	<p>
	This page describes the opcode structure for the 65k line of processors.
	</p>
  </div><div id="toc" class="h2"><div class="h2h"><div class="h2t"> </div><h2>Table of content</h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><ul><li><a href="#opstruct">Opcode Structure</a></li></ul></div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="opstruct" id="opstruct">Opcode Structure</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><p>
	The original 6502 opcode structure always consists of a single byte opcode and an operand.
	For the 65k opcodes extension the opcodes left in the 256 byte opcode page do not provide
	enough space. Therefore the opcode structure is being extended with prefix bytes.
	</p>
	<table>
	<tr><th colspan="13">Bytes</th></tr>
	<tr><td width="5%">-4</td><td width="5%">-3</td><td width="5%">-2</td><td width="5%">-1</td><td width="5%">0</td><td width="5%">1</td><td width="5%">2</td><td width="5%">3</td><td width="5%">4</td><td width="5%">5</td><td width="5%">6</td><td width="5%">7</td><td width="5%">8</td></tr>
	<tr><th colspan="13">6502 opcodes</th></tr>
	<tr><td>-</td><td>-</td><td>-</td><td>-</td><td>Opcode</td><td colspan="8">-</td></tr>
	<tr><td>-</td><td>-</td><td>-</td><td>-</td><td>Opcode</td><td>relative/ immediate/ zeropage operand</td><td colspan="7">-</td></tr>
	<tr><td>-</td><td>-</td><td>-</td><td>-</td><td>Opcode</td><td colspan="2">address operand</td><td colspan="6">-</td></tr>
	<tr><th colspan="13">65002 opcodes</th></tr>
	<tr><td>-</td><td>(prefix1)</td><td>(prefix2)</td><td>(page)</td><td>Opcode</td><td colspan="8">-</td></tr>
	<tr><td>-</td><td>(prefix1)</td><td>(prefix2)</td><td>(page)</td><td>Opcode</td><td>byte relative/ immediate/ zeropage operand</td><td colspan="7">-</td></tr>
	<tr><td>-</td><td>(prefix1)</td><td>(prefix2)</td><td>(page)</td><td>Opcode</td><td colspan="2">word relative/ immediate/ address operand</td><td colspan="6">-</td></tr>
	<tr><td>-</td><td>(prefix1)</td><td>(prefix2)</td><td>(page)</td><td>Opcode</td><td colspan="4">long relative/ immediate/ address operand</td><td colspan="4">-</td></tr>
	<tr><td>-</td><td>(prefix1)</td><td>(prefix2)</td><td>(page)</td><td>Opcode</td><td colspan="8">quad relative/ immediate/ address operand</td></tr>
	<tr><th colspan="13">65010 opcodes</th></tr>
	<tr><td>(prefix1)</td><td>(prefix2)</td><td>(prefix3)</td><td>(page)</td><td>Opcode</td><td colspan="8">-</td></tr>
	<tr><td>(prefix1)</td><td>(prefix2)</td><td>(prefix3)</td><td>(page)</td><td>Opcode</td><td>byte relative/ immediate/ zeropage operand</td><td colspan="7">-</td></tr>
	<tr><td>(prefix1)</td><td>(prefix2)</td><td>(prefix3)</td><td>(page)</td><td>Opcode</td><td colspan="2">word relative/ immediate/ address operand</td><td colspan="6">-</td></tr>
	<tr><td>(prefix1)</td><td>(prefix2)</td><td>(prefix3)</td><td>(page)</td><td>Opcode</td><td colspan="4">long relative/ immediate/ address operand</td><td colspan="4">-</td></tr>
	<tr><td>(prefix1)</td><td>(prefix2)</td><td>(prefix3)</td><td>(page)</td><td>Opcode</td><td colspan="8">quad relative/ immediate/ address operand</td></tr>
	</table>
	<p>
	As you can see in this table, each opcode can have up to two (resp. three for the 65010) prefix bytes,
	plus an opcode page selector before the actual opcode. 
	Also the operands can now be byte, word, long and quad wide - 1, 2, 4 or 8 byte long.
	</p><p>
	All of the prefix bytes, as well as the page selector are optional. I.e. any of those must be
	within the original 6502 opcode table to be distinguishable from an original opcode.
	The following table shows the distribution of the prefix bytes in the 6502 opcode space:
	</p>
<table class="optable"><tr><th>LSB-&gt;<br/>MSB</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th></tr>
<tr><th>0</th><td><div>BRK #byte</div>
</td><td><div>ORA (zp,X)</div>
</td><td class="c65k"><div>LDA zp,Y</div>
</td><td class="prefix">prefix1</td><td class="cmos"><div>TSB zp</div>
</td><td><div>ORA zp</div>
</td><td><div>ASL zp</div>
</td><td class="prefix">prefix1</td><td><div>PHP </div>
</td><td><div>ORA #byte</div>
</td><td><div>ASL </div>
</td><td class="prefix">prefix2</td><td class="cmos"><div>TSB abs</div>
</td><td><div>ORA abs</div>
</td><td><div>ASL abs</div>
</td><td class="prefix">EXT</td></tr>
<tr><th>1</th><td><div>BPL rel</div>
</td><td><div>ORA (zp),Y</div>
</td><td class="cmos"><div>ORA (zp)</div>
</td><td class="prefix">prefix1</td><td class="cmos"><div>TRB zp</div>
</td><td><div>ORA zp,X</div>
</td><td><div>ASL zp,X</div>
</td><td class="prefix">prefix1</td><td><div>CLC </div>
</td><td><div>ORA abs,Y</div>
</td><td class="cmos"><div>INC </div>
</td><td class="prefix">prefix2</td><td class="cmos"><div>TRB abs</div>
</td><td><div>ORA abs,X</div>
</td><td><div>ASL abs,X</div>
</td><td class="unused"></td></tr>
<tr><th>2</th><td><div>JSR abs</div>
</td><td><div>AND (zp,X)</div>
</td><td class="c65k"><div>STA zp,Y</div>
</td><td class="prefix">prefix1</td><td><div>BIT zp</div>
</td><td><div>AND zp</div>
</td><td><div>ROL zp</div>
</td><td class="prefix">prefix1</td><td><div>PLP </div>
</td><td><div>AND #byte</div>
</td><td><div>ROL </div>
</td><td class="prefix">prefix2</td><td><div>BIT abs</div>
</td><td><div>AND abs</div>
</td><td><div>ROL abs</div>
</td><td class="prefix">SYS</td></tr>
<tr><th>3</th><td><div>BMI rel</div>
</td><td><div>AND (zp),Y</div>
</td><td class="cmos"><div>AND (zp)</div>
</td><td class="prefix">prefix1</td><td class="cmos"><div>BIT zp,X</div>
</td><td><div>AND zp,X</div>
</td><td><div>ROL zp,X</div>
</td><td class="prefix">prefix1</td><td><div>SEC </div>
</td><td><div>AND abs,Y</div>
</td><td class="cmos"><div>DEC </div>
</td><td class="prefix">prefix2</td><td class="cmos"><div>BIT abs,X</div>
</td><td><div>AND abs,X</div>
</td><td><div>ROL abs,X</div>
</td><td class="unused"></td></tr>
<tr><th>4</th><td><div>RTI </div>
</td><td><div>EOR (zp,X)</div>
</td><td class="c65k"><div>LDA (abs),Y</div>
</td><td class="prefix">prefix1</td><td class="c65k"><div>BSR relwide</div>
</td><td><div>EOR zp</div>
</td><td><div>LSR zp</div>
</td><td class="prefix">prefix1</td><td><div>PHA </div>
</td><td><div>EOR #byte</div>
</td><td><div>LSR </div>
</td><td class="prefix">prefix2</td><td><div>JMP abs</div>
</td><td><div>EOR abs</div>
</td><td><div>LSR abs</div>
</td><td class="prefix">QUICK</td></tr>
<tr><th>5</th><td><div>BVC rel</div>
</td><td><div>EOR (zp),Y</div>
</td><td class="cmos"><div>EOR (zp)</div>
</td><td class="prefix">prefix1</td><td class="unused"></td><td><div>EOR zp,X</div>
</td><td><div>LSR zp,X</div>
</td><td class="prefix">prefix1</td><td><div>CLI </div>
</td><td><div>EOR abs,Y</div>
</td><td class="cmos"><div>PHY </div>
</td><td class="prefix">prefix2</td><td class="unused"></td><td><div>EOR abs,X</div>
</td><td><div>LSR abs,X</div>
</td><td class="unused"></td></tr>
<tr><th>6</th><td><div>RTS </div>
</td><td><div>ADC (zp,X)</div>
</td><td class="c65k"><div>LDA (abs,X)</div>
</td><td class="prefix">prefix1</td><td class="cmos"><div>STZ zp</div>
</td><td><div>ADC zp</div>
</td><td><div>ROR zp</div>
</td><td class="prefix">prefix1</td><td><div>PLA </div>
</td><td><div>ADC #byte</div>
</td><td><div>ROR </div>
</td><td class="prefix">prefix2</td><td><div>JMP (abs)</div>
</td><td><div>ADC abs</div>
</td><td><div>ROR abs</div>
</td><td class="prefix">reserved prefix</td></tr>
<tr><th>7</th><td><div>BVS rel</div>
</td><td><div>ADC (zp),Y</div>
</td><td class="cmos"><div>ADC (zp)</div>
</td><td class="prefix">prefix1</td><td class="cmos"><div>STZ zp,X</div>
</td><td><div>ADC zp,X</div>
</td><td><div>ROR zp,X</div>
</td><td class="prefix">prefix1</td><td><div>SEI </div>
</td><td><div>ADC abs,Y</div>
</td><td class="cmos"><div>PLY </div>
</td><td class="prefix">prefix2</td><td class="cmos"><div>JMP (abs,X)</div>
</td><td><div>ADC abs,X</div>
</td><td><div>ROR abs,X</div>
</td><td class="unused"></td></tr>
<tr><th>8</th><td class="cmos"><div>BRA rel</div>
</td><td><div>STA (zp,X)</div>
</td><td class="c65k"><div>BSR rel</div>
</td><td class="prefix">prefix1</td><td><div>STY zp</div>
</td><td><div>STA zp</div>
</td><td><div>STX zp</div>
</td><td class="prefix">prefix1</td><td><div>DEY </div>
</td><td class="cmos"><div>BIT #byte</div>
</td><td><div>TXA </div>
</td><td class="prefix">prefix2</td><td><div>STY abs</div>
</td><td><div>STA abs</div>
</td><td><div>STX abs</div>
</td><td class="prefix">reserved prefix</td></tr>
<tr><th>9</th><td><div>BCC rel</div>
</td><td><div>STA (zp),Y</div>
</td><td class="cmos"><div>STA (zp)</div>
</td><td class="prefix">prefix1</td><td><div>STY zp,X</div>
</td><td><div>STA zp,X</div>
</td><td><div>STX zp,Y</div>
</td><td class="prefix">prefix1</td><td><div>TYA </div>
</td><td><div>STA abs,Y</div>
</td><td><div>TXS </div>
</td><td class="prefix">prefix2</td><td class="cmos"><div>STZ abs</div>
</td><td><div>STA abs,X</div>
</td><td class="cmos"><div>STZ abs,X</div>
</td><td class="prefix">reserved prefix</td></tr>
<tr><th>A</th><td><div>LDY #byte</div>
</td><td><div>LDA (zp,X)</div>
</td><td><div>LDX #byte</div>
</td><td class="prefix">prefix1</td><td><div>LDY zp</div>
</td><td><div>LDA zp</div>
</td><td><div>LDX zp</div>
</td><td class="prefix">prefix1</td><td><div>TAY </div>
</td><td><div>LDA #byte</div>
</td><td><div>TAX </div>
</td><td class="prefix">prefix2</td><td><div>LDY abs</div>
</td><td><div>LDA abs</div>
</td><td><div>LDX abs</div>
</td><td class="prefix">reserved prefix</td></tr>
<tr><th>B</th><td><div>BCS rel</div>
</td><td><div>LDA (zp),Y</div>
</td><td class="cmos"><div>LDA (zp)</div>
</td><td class="prefix">prefix1</td><td><div>LDY zp,X</div>
</td><td><div>LDA zp,X</div>
</td><td><div>LDX zp,Y</div>
</td><td class="prefix">prefix1</td><td><div>CLV </div>
</td><td><div>LDA abs,Y</div>
</td><td><div>TSX </div>
</td><td class="prefix">prefix2</td><td><div>LDY abs,X</div>
</td><td><div>LDA abs,X</div>
</td><td><div>LDX abs,Y</div>
</td><td class="prefix">reserved prefix</td></tr>
<tr><th>C</th><td><div>CPY #byte</div>
</td><td><div>CMP (zp,X)</div>
</td><td class="c65k"><div>STA (abs),Y</div>
</td><td class="prefix">prefix1</td><td><div>CPY zp</div>
</td><td><div>CMP zp</div>
</td><td><div>DEC zp</div>
</td><td class="prefix">prefix1</td><td><div>INY </div>
</td><td><div>CMP #byte</div>
</td><td><div>DEX </div>
</td><td class="prefix">prefix2</td><td><div>CPY abs</div>
</td><td><div>CMP abs</div>
</td><td><div>DEC abs</div>
</td><td class="prefix">reserved prefix</td></tr>
<tr><th>D</th><td><div>BNE rel</div>
</td><td><div>CMP (zp),Y</div>
</td><td class="cmos"><div>CMP (zp)</div>
</td><td class="prefix">prefix1</td><td class="unused"></td><td><div>CMP zp,X</div>
</td><td><div>DEC zp,X</div>
</td><td class="prefix">prefix1</td><td><div>CLD </div>
</td><td><div>CMP abs,Y</div>
</td><td class="cmos"><div>PHX </div>
</td><td class="prefix">prefix2</td><td class="c65k"><div>JSR (abs)</div>
</td><td><div>CMP abs,X</div>
</td><td><div>DEC abs,X</div>
</td><td class="prefix">reserved prefix</td></tr>
<tr><th>E</th><td><div>CPX #byte</div>
</td><td><div>SBC (zp,X)</div>
</td><td class="c65k"><div>STA (abs,X)</div>
</td><td class="prefix">prefix1</td><td><div>CPX zp</div>
</td><td><div>SBC zp</div>
</td><td><div>INC zp</div>
</td><td class="prefix">prefix1</td><td><div>INX </div>
</td><td><div>SBC #byte</div>
</td><td><div>NOP </div>
</td><td class="prefix">prefix2</td><td><div>CPX abs</div>
</td><td><div>SBC abs</div>
</td><td><div>INC abs</div>
</td><td class="prefix">reserved prefix</td></tr>
<tr><th>F</th><td><div>BEQ rel</div>
</td><td><div>SBC (zp),Y</div>
</td><td class="cmos"><div>SBC (zp)</div>
</td><td class="prefix">prefix1</td><td class="c65k"><div>TRP #byte</div>
</td><td><div>SBC zp,X</div>
</td><td><div>INC zp,X</div>
</td><td class="prefix">prefix1</td><td><div>SED </div>
</td><td><div>SBC abs,Y</div>
</td><td class="cmos"><div>PLX </div>
</td><td class="prefix">prefix2</td><td class="c65k"><div>JSR (abs,X)</div>
</td><td><div>SBC abs,X</div>
</td><td><div>INC abs,X</div>
</td><td class="prefix">reserved prefix</td></tr>
</table>

<p>Legend:</p>
<table class="optable">
<tr><td>NMOS Opcodes</td><td class="cmos">CMOS Opcodes</td><td class="c65k">New 65k opcodes</td><td class="prefix">65k Prefix codes</td><td class="unused">Unused/Reserved</td></tr>
</table>

        <p>
        Some of the opcode fields are named prefix1 and prefix2, these are the modifiers to other opcodes as described above.
        Others are named like "QUICK prefix" or "EXT prefix". Those are page table selectors.
        These opcodes provide a way to extend the opcode list by having a second opcode byte follow the prefix. Thus there
        could be 256 additional "QUICK" opcodes, and 256 additional "EXT opcodes" and so on. These opcode planes are
        described below.
        </p><p>
	The prefix codes define a number of modifier bits. The prefix bits relevant for the opcode are 
	shown in the respective table cell for each opcode as well. The meaning of the prefix bits is given 
	below.
        </p><p>
        Note that there is still "plenty" of room for extensions. There are nine reserved prefix bytes - 4 of them could be used to
        implement further modification bits (like going 128 bits ...yuck!) or they could be used as further opcode planes. Some plans exist for the 65010.
        The one prefix at $6F should be reserved for extensions like floating point or vector processors or other extensions
        that do not "just" modify existing opcodes.
        </p><p>
	Note that the other features are explained in:
	</p>
	<ul>
	<li><a href="af65002prefixes.html">Prefixes page</a> describes the use of the prefix bits</li>
	<li><a href="af65002admodes.html">Addressing Modes page</a> describes the different addressing modes</li>
	<li><a href="af65002opcodes.html">Opcodes page</a> gives an overview on the opcodes</li>
	<li><a href="af65002hyper.html">Hypervisor mode page</a> describes the hypervisor mode and the use of the UM prefix</li>
	</ul>
   </div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2>Disclaimer</h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c">
All Copyrights are acknowledged.
The information here is provided under the terms as described
in <a href=af65002front.html#lic>the license section</a>.
    </div></div><hr />
Last updated 2012-04-23.
  </div></div><div id="footer"> </div></div></body></html> 

